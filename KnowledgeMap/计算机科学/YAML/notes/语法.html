<!doctype html>
<html style='font-size:24px !important'>
<head><title>PKM</title>
<link rel="shortcut icon" type="image/x-icon" href="https://charlesshan.top/resources/favicon.ico?">
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link rel="stylesheet" type="text/css" href="style.css">
<link rel="stylesheet" type="text/css" href="../style.css">
<link rel="stylesheet" type="text/css" href="../../style.css">
<link rel="stylesheet" type="text/css" href="../../../style.css">
<link rel="stylesheet" type="text/css" href="../../../../style.css">
<link rel="stylesheet" type="text/css" href="../../../../../style.css"><title>语法</title>
</head>
<body class='typora-export'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='语法'><span>语法</span></h1><p><span>2022.06.17</span></p><div class='md-toc' mdtype='toc'><p class="md-toc-content" role="list"><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n0"><a class="md-toc-inner" href="#语法">语法</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n11"><a class="md-toc-inner" href="#41-production-syntax">4.1. Production Syntax</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n47"><a class="md-toc-inner" href="#42-production-parameters">4.2. Production Parameters</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n78"><a class="md-toc-inner" href="#43-production-naming-conventions">4.3. Production Naming Conventions</a></span></p></div><blockquote><p><span>本文按照YAML官方文档1.2.2版本翻译总结而成</span></p><p><a href='https://yaml.org/spec/1.2.2/#chapter-4-syntax-conventions' target='_blank' class='url'>https://yaml.org/spec/1.2.2/#chapter-4-syntax-conventions</a></p></blockquote><p><span>The following chapters formally define the syntax of YAML character </span><a href='https://yaml.org/spec/1.2.2/#streams'><span>streams</span></a><span>, using parameterized BNF productions. Each BNF production is both named and numbered for easy reference. Whenever possible, basic structures are specified before the more complex structures using them in a “bottom up” fashion.</span></p><p><span>The productions are accompanied by examples which are presented in a two-pane side-by-side format. The left-hand side is the YAML example and the right-hand side is an alternate YAML view of the example. The right-hand view uses JSON when possible. Otherwise it uses a YAML form that is as close to JSON as possible.</span></p><h2 id='41-production-syntax'><span>4.1. Production Syntax</span></h2><p><span>Productions are defined using the syntax </span><code>production-name ::= term</code><span>, where a term is either:</span></p><ul><li><p><span>An atomic term</span></p><p><span>A quoted string (</span><code>&quot;abc&quot;</code><span>), which matches that concatenation of characters. A single character is usually written with single quotes (</span><code>&#39;a&#39;</code><span>).A hexadecimal number (</span><code>x0A</code><span>), which matches the character at that Unicode code point.A range of hexadecimal numbers (</span><code>[x20-x7E]</code><span>), which matches any character whose Unicode code point is within that range.The name of a production (</span><code>c-printable</code><span>), which matches that production.</span></p></li></ul><ul><li><p><span>A lookaround</span></p><p><code>[ lookahead = term ]</code><span>, which matches the empty string if </span><code>term</code><span> would match.</span><code>[ lookahead ≠ term ]</code><span>, which matches the empty string if </span><code>term</code><span> would not match.</span><code>[ lookbehind = term ]</code><span>, which matches the empty string if </span><code>term</code><span> would match beginning at any prior point on the line and ending at the current position.</span></p></li></ul><ul><li><p><span>A special production</span></p><p><code>&lt;start-of-line&gt;</code><span>, which matches the empty string at the beginning of a line.</span><code>&lt;end-of-input&gt;</code><span>, matches the empty string at the end of the input.</span><code>&lt;empty&gt;</code><span>, which (always) matches the empty string.</span></p></li></ul><ul><li><p><span>A parenthesized term</span></p><p><span>Matches its contents.</span></p></li></ul><ul><li><p><span>A concatenation</span></p><p><span>Is </span><code>term-one term-two</code><span>, which matches </span><code>term-one</code><span> followed by </span><code>term-two</code><span>.</span></p></li></ul><ul><li><p><span>A alternation</span></p><p><span>Is </span><code>term-one | term-two</code><span>, which matches the </span><code>term-one</code><span> if possible, or </span><code>term-two</code><span> otherwise.</span></p></li></ul><ul><li><p><span>A quantified term:</span></p><p><code>term?</code><span>, which matches </span><code>(term | &lt;empty&gt;)</code><span>.</span><code>term*</code><span>, which matches </span><code>(term term* | &lt;empty&gt;)</code><span>.</span><code>term+</code><span>, which matches </span><code>(term term*)</code><span>.</span></p></li></ul><blockquote><p><span>Note: Quantified terms are always greedy.</span></p></blockquote><p><span>The order of precedence is parenthesization, then quantification, then concatenation, then alternation.</span></p><p><span>Some lines in a production definition might have a comment like:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 13.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">production-a ::=</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  production-b &nbsp; &nbsp;  # clarifying comment</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 62px;"></div><div class="CodeMirror-gutters" style="display: none; height: 62px;"></div></div></div></pre><p><span>These comments are meant to be informative only. For instance a comment that says </span><code># not followed by non-ws char</code><span> just means that you should be aware that actual production rules will behave as described even though it might not be obvious from the content of that particular production alone.</span></p><h2 id='42-production-parameters'><span>4.2. Production Parameters</span></h2><p><span>Some productions have parameters in parentheses after the name, such as </span><a href='https://yaml.org/spec/1.2.2/#rule-s-line-prefix'><code>s-line-prefix(n,c)</code></a><span>. A parameterized production is shorthand for a (infinite) series of productions, each with a fixed value for each parameter.</span></p><p><span>For instance, this production:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 13.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">production-a(n) ::= production-b(n)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 31px;"></div><div class="CodeMirror-gutters" style="display: none; height: 31px;"></div></div></div></pre><p><span>Is shorthand for:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 13.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">production-a(0) ::= production-b(0)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">production-a(1) ::= production-b(1)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 93px;"></div><div class="CodeMirror-gutters" style="display: none; height: 93px;"></div></div></div></pre><p><span>And this production:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 13.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">production-a(n) ::=</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  ( production-b(n+m) production-c(n+m) )+</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 62px;"></div><div class="CodeMirror-gutters" style="display: none; height: 62px;"></div></div></div></pre><p><span>Is shorthand for:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 13.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">production-a(0) ::=</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ( production-b(0) production-c(0) )+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | ( production-b(1) production-c(1) )+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | …</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">production-a(1) ::=</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ( production-b(1) production-c(1) )+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | ( production-b(2) production-c(2) )+</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  | …</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">…</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 279px;"></div><div class="CodeMirror-gutters" style="display: none; height: 279px;"></div></div></div></pre><p><span>The parameters are as follows:</span></p><ul><li><p><span>Indentation: </span><code>n</code><span> or </span><code>m</code></p><p><span>May be any natural number, including zero. </span><code>n</code><span> may also be -1.</span></p></li></ul><ul><li><p><span>Context: </span><code>c</code></p><p><span>This parameter allows productions to tweak their behavior according to their surrounding. YAML supports two groups of </span><em><span>contexts</span></em><span>, distinguishing between </span><a href='https://yaml.org/spec/1.2.2/#block-style-productions'><span>block styles</span></a><span> and </span><a href='https://yaml.org/spec/1.2.2/#flow-style-productions'><span>flow styles</span></a><span>.</span></p><p><span>May be any of the following values:</span></p><p><code>BLOCK-IN</code><span> – inside block context</span><code>BLOCK-OUT</code><span> – outside block context</span><code>BLOCK-KEY</code><span> – inside block key context</span><code>FLOW-IN</code><span> – inside flow context</span><code>FLOW-OUT</code><span> – outside flow context</span><code>FLOW-KEY</code><span> – inside flow key context</span></p></li><li><p><span>(Block) Chomping: </span><code>t</code></p><p><span>The </span><a href='https://yaml.org/spec/1.2.2/#line-break-characters'><span>line break</span></a><span> chomping behavior for flow scalars. May be any of the following values:</span></p></li></ul><ul><li><code>STRIP</code><span> – remove all trailing newlines</span></li><li><code>CLIP</code><span> – remove all trailing newlines except the first</span></li><li><code>KEEP</code><span> – retain all trailing newlines</span></li></ul><h2 id='43-production-naming-conventions'><span>4.3. Production Naming Conventions</span></h2><p><span>To make it easier to follow production combinations, production names use a prefix-style naming convention. Each production is given a prefix based on the type of characters it begins and ends with.</span></p><ul><li><p><code>e-</code></p><p><span>A production matching no characters.</span></p></li><li><p><code>c-</code></p><p><span>A production starting and ending with a special character.</span></p></li><li><p><code>b-</code></p><p><span>A production matching a single </span><a href='https://yaml.org/spec/1.2.2/#line-break-characters'><span>line break</span></a><span>.</span></p></li><li><p><code>nb-</code></p><p><span>A production starting and ending with a non-</span><a href='https://yaml.org/spec/1.2.2/#line-break-characters'><span>break</span></a><span> character.</span></p></li><li><p><code>s-</code></p><p><span>A production starting and ending with a </span><a href='https://yaml.org/spec/1.2.2/#white-space-characters'><span>white space</span></a><span> character.</span></p></li><li><p><code>ns-</code></p><p><span>A production starting and ending with a non-</span><a href='https://yaml.org/spec/1.2.2/#white-space-characters'><span>space</span></a><span> character.</span></p></li><li><p><code>l-</code></p><p><span>A production matching complete line(s).</span></p></li><li><p><code>X-Y-</code></p><p><span>A production starting with an </span><code>X-</code><span> character and ending with a </span><code>Y-</code><span> character, where </span><code>X-</code><span> and </span><code>Y-</code><span> are any of the above prefixes.</span></p></li><li><p><code>X+</code><span>, </span><code>X-Y+</code></p><p><span>A production as above, with the additional property that the matched content </span><a href='https://yaml.org/spec/1.2.2/#indentation-spaces'><span>indentation</span></a><span> level is greater than the specified </span><code>n</code><span> parameter.</span></p></li></ul></div></div>
</body>
</html>