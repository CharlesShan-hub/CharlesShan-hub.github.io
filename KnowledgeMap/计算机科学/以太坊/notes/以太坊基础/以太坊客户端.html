<!doctype html>
<html style='font-size:19px !important'>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap' rel='stylesheet' type='text/css' /><link rel="stylesheet" type="text/css" href="style.css">
<link rel="stylesheet" type="text/css" href="../style.css">
<link rel="stylesheet" type="text/css" href="../../style.css">
<link rel="stylesheet" type="text/css" href="../../../style.css">
<link rel="stylesheet" type="text/css" href="../../../../style.css">
<link rel="stylesheet" type="text/css" href="../../../../../style.css"><title>以太坊客户端</title>
</head>
<body class='typora-export'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='以太坊客户端'><span>以太坊客户端</span></h1><p><span>2022.2.27</span></p><h2 id='主要内容'><span>主要内容</span></h2><p><span>客户端;Geth的安装和使用;搭建私链</span></p><h2 id='什么是以太坊客户端'><span>什么是以太坊客户端</span></h2><p><span>【珍惜生命：以太坊是个规范，符合这个规范的程序，是以太坊客户端】</span></p><ul><li><span>以太坊客户端是一个软件应用程序，它实现以太坊规范并通过p2p 网络与其他以太坊客户端进行通信。如果不同的以太坊客户端符合参考规范和标准化通信协议，则可以进行相互操作。</span></li><li><span>以太坊是一个开源项目，由“黄皮书”正式规范定义。除了各种以太坊改进提案之外，此正式规范还定义了以太坊客户端的标准行为。</span></li></ul><ul><li><span>因为以太坊有明确的正式规范，以太网客户端有了许多独立开发的软件实现，它们之间又可以彼此交互。</span></li></ul><h2 id='基于以太坊规范的网络'><span>基于以太坊规范的网络</span></h2><ul><li><span>存在各种基于以太坊规范的网络，这些网络基本符合以太坊“黄皮书”中定义的形式规范，但它们之间可能相互也可能不相互操作。</span></li><li><span>这些基于以太坊的网络中有:以太坊，以太坊经典，Ella，Expanse，Ubiq，Musicoin等等。</span></li><li><span>虽然大多数在协议级别兼容，但这些网络通常具有特殊要求，以太坊客户端软件的维护人员、需要进行微小更改、以支持每个网络的功能或属性。</span></li></ul><h2 id='以太坊的多种客户端'><span>以太坊的多种客户端</span></h2><ul><li><p><span>go-ethereum ( Go )</span></p><p><span>官方推荐，开发使用最多，别称，geth</span></p><p><span>地址:</span><a href='https://github.com/ethereum/go-ethereum' target='_blank' class='url'>https://github.com/ethereum/go-ethereum</a></p></li><li><p><span>parity ( Rust )</span></p><p><span>最轻便客户端，在历次以太坊网络攻击中表现卓越</span></p><p><span>地址:</span><a href='https://github.com/ethcore/parity/releases' target='_blank' class='url'>https://github.com/ethcore/parity/releases</a></p></li><li><p><span>cpp-ethereum(C++)</span></p><p><span>地址:</span><a href='https://github.com/ethereum/cpp-ethereum' target='_blank' class='url'>https://github.com/ethereum/cpp-ethereum</a></p></li><li><p><span>pyethapp (python)</span></p><p><span>地址:</span><a href='https://github.com/heikoheiko/pyethapp' target='_blank' class='url'>https://github.com/heikoheiko/pyethapp</a></p></li><li><p><span>ethereumjs-lib(javascript)</span></p><p><span>地址:</span><a href='https://github.com/ethereumjs/ethereumjs-lib' target='_blank' class='url'>https://github.com/ethereumjs/ethereumjs-lib</a></p></li><li><p><span>EthereumJ / Harmony ( Java )</span></p><p><span>地址:</span><a href='https://github.com/ethereum/ethereumj' target='_blank' class='url'>https://github.com/ethereum/ethereumj</a></p></li></ul><h2 id='以太坊全节点'><span>以太坊全节点</span></h2><ul><li><strong><span>全节点是整个主链的一个副本</span></strong><span>，存储并维护链上的</span><strong><span>所有数据</span></strong><span>，并随时验证新区块的合法性。</span></li></ul><ul><li><span>区块链的健康和扩展弹性，取决于具有许多独立操作和地理上分散的全节点。每个全节点都可以帮助其他新节点获取区块数据，并提供所有交易和合约的独立验证。</span></li><li><span>运行全节点将耗费</span><strong><span>巨大的成本</span></strong><span>，包括硬件资源和带宽。</span></li><li><span>以太坊开发不需要在实时网络(主网)上运行的全节点。我们可以使用测试网络的节点来代替，也可以用本地私链，或者使用服务商提供的基于云的以太坊客户端;这些几乎都可以执行所有操作。</span></li></ul><h2 id='远程客户端和轻节点'><span>远程客户端和轻节点</span></h2><ul><li><strong><span>远程客户端</span></strong></li></ul><p><span>不存储区块链的本地副本或验证块和交易。这些客户端一般只提供钱包的功能，可以创建和广播交易。远程客户端可用于连接到 现有网络，</span><strong><span>MetaMask就是一个这样的客户端</span></strong><span>。</span></p><ul><li><strong><span>轻节点</span></strong></li></ul><p><strong><span>不保存链上的区块历史数据，只保存区块链当前的状态</span></strong><span>。轻节点可以对块和交易进行验证。</span></p><h2 id='全节点的优缺点'><span>全节点的优缺点</span></h2><p><span>优点</span></p><ul><li><span>为以太坊网络的灵活性和抗审查性提供有力支持。 </span></li><li><span>权威地验证所有交易。</span></li><li><span>可以直接与公共区块链上的任何合约交互。</span></li><li><span>可以离线查询区块链状态(帐户，合约等)。</span></li><li><span>可以直接把自己的合约部署到公共区块链中。 </span></li></ul><p><span>缺点</span></p><ul><li><span>需要巨大的硬件和带宽资源，而且会不断增长。</span></li><li><span>第一次下载往往需要几天才能完全同步。</span></li><li><span>必须及时维护、升级并保持在线状态以同步区块。</span></li></ul><h2 id='公共测试网络节点的优缺点'><span>公共测试网络节点的优缺点</span></h2><p><span>优点</span></p><ul><li><span>一个testnet节点需要同步和存储更少的数据，大约10GB，具体取决于不同的网络。</span></li><li><span>一个testnet节点一般可以在几个小时内完全同步。</span></li><li><span>部署合约或进行交易只需要发送测试以太，可以从“水龙头”免费获得。</span></li><li><span>测试网络是公共区块链，有许多其他用户和合约运行(区别于私链)。</span></li></ul><p><span>缺点</span></p><ul><li><span>测试网络上使用测试以太，它没有价值。因此，无法测试交易对手的 安全性，因为没有任何利害关系。</span></li><li><span>测试网络上的测试无法涵盖所有的真实主网特性。例如，交易费用虽 然是发送交易所必需的，但由于gas免费，因此 testnet 上往往不会考虑。而且一般来说，测试网络不会像主网那样经常拥堵。</span></li></ul><h2 id='本地私链的优缺点'><span>本地私链的优缺点</span></h2><p><span>优点</span></p><ul><li><span>磁盘上几乎没有数据，也不同步别的数据，是一个完全“干净”的 环境。</span></li><li><span>无需获取测试以太，你可以任意分配以太，也可以随时自己挖矿获 得。</span></li><li><span>没有其他用户，也没有其他合约，没有任何外部干扰。 </span></li></ul><p><span>缺点</span></p><ul><li><span>没有其他用户意味与公链的行为不同。发送的交易并不存在空间或 交易顺序的竞争。</span></li><li><span>除自己之外没有矿工意味着挖矿更容易预测，因此无法测试公链上 发生的某些情况。</span></li><li><span>没有其他合约，意味着你必须部署要测试的所有内容，包括所有的依赖项和合约库。</span></li></ul><h2 id='json-rpc'><span>JSON-RPC</span></h2><p><span>• 以太坊客户端提供了API和一组远程调用(RPC)命令，这些命令被编码为 JSON。这被称为 JSON-RPC API。本质上，JSON-RPC API 就是一个接口，允许我们编写的程序使用以太坊客户端作为网 关，访问以太坊网络和链上数据。</span></p><p><span>• 通常，RPC接口作为一个HTTP服务，端口设定为8545。出于安全原因，默认情况下，它仅限于接受来自 localhost 的连接。</span></p><p><span>• 要访问JSON-RPCAPI，我们可以使用编程语言编写的专用库，例如JavaScript的 web3.js。</span></p><p><span>• 或者也可以手动构建HTTP请求并发送/接收JSON编码的请求，如:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.25px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ curl</span> <span class="cm-attribute">-X</span> POST <span class="cm-attribute">-H</span> <span class="cm-string">"Content-Type: application/json"</span> <span class="cm-attribute">--data</span> \ <span class="cm-string">'{"jsonrpc":"2.0","method":"web3_clientVersion","params":[],"id":1 }'</span> \ http://localhost:8545</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 54px;"></div><div class="CodeMirror-gutters" style="display: none; height: 54px;"></div></div></div></pre><h2 id='geth的安装与同步全节点'><span>geth的安装与同步全节点</span></h2><p><span>推荐源码安装，详细文件参考</span><a href='https://pan.baidu.com/s/1mdKzZNvKD1R0ItlNhYAXIg?pwd=6s2d'><span>这里</span></a><span>。</span></p><ol start='' ><li><span>我们的第一步是克隆 git 仓库，以获取源代码的副本。</span></li></ol><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">git</span> clone https://github.com/ethereum/go-ethereum.git</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 27px;"></div><div class="CodeMirror-gutters" style="display: none; height: 27px;"></div></div></div></pre><ol start='2' ><li><span>从源码构建Geth,要构建 Geth，切换到下载源代码的目录并使用 make 命令:</span></li></ol><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">cd</span> go-ethereum </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">make</span> geth</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 54px;"></div><div class="CodeMirror-gutters" style="display: none; height: 54px;"></div></div></div></pre><p><span>如果一切顺利，我们将看到 Go 编译器构建每个组件，直到它生成 geth 可执行文件:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">build/env.sh go run build/ci.go install ./cmd/geth</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">&gt;&gt;&gt; /usr/local/go/bin/go install <span class="cm-attribute">-ldflags</span> <span class="cm-attribute">-X</span> main<span class="cm-def">.gitCommit</span><span class="cm-operator">=</span>58a1e13e6dd7f52a1d5e67bee47d23fd6cfdee5c <span class="cm-attribute">-v</span> ./cmd/geth github.com/ethereum/go-ethereum/common/hexutil github.com/ethereum/go-ethereum/common/math</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">github.com/ethereum/go-ethereum/crypto/sha3 github.com/ethereum/go-ethereum/rlp github.com/ethereum/go-ethereum/crypto/secp256k1 github.com/ethereum/go-ethereum/common [...] github.com/ethereum/go-ethereum/cmd/utils</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">github.com/ethereum/go-ethereum/cmd/geth Done building. Run <span class="cm-string">"build/bin/geth"</span> to</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">launch geth.</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 243px;"></div><div class="CodeMirror-gutters" style="display: none; height: 243px;"></div></div></div></pre><ol start='3' ><li><span>查看 geth version，确保在真正运行之前安装正常:</span></li></ol><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ </span>./build/bin/geth version</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Geth</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Version: <span class="cm-number">1</span>.8.0-unstable</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Git Commit: e37f7be97e47a032d723db16d8b195998547805a Architecture: amd64</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Protocol Versions: [63 <span class="cm-number">62</span>] Network Id: <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Go Version: go1.9</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Operating System: linux <span class="cm-def">GOPATH</span><span class="cm-operator">=</span>/home/ubuntu/project <span class="cm-def">GOROOT</span><span class="cm-operator">=</span>/usr/local/go</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 189px;"></div><div class="CodeMirror-gutters" style="display: none; height: 189px;"></div></div></div></pre><p>&nbsp;</p><ol start='4' ><li><span>安装好了 Geth，现在我们可以尝试运行一下它。执行下面的命令，geth 就会开始同步区块，并存储在当前目录下。这里的 --syncmode fast 参数表示我们会以“快速”模式同步区块。在这种模式下，我们只会下载每个区块头和区块体，但不会执行验证所有的交易，直到所有区块同步完毕再去获取一个系统当前的状态。这样就节省了很多交易验证的时间。</span></li></ol><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">$ geth</span> <span class="cm-attribute">--datadir</span> . <span class="cm-attribute">--syncmode</span> fast</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 27px;"></div><div class="CodeMirror-gutters" style="display: none; height: 27px;"></div></div></div></pre><p><span>通常，在同步以太坊区块链时，客户端会一开始就下载并验证每个块和每个交易，也就是说从创世区块开始。 毫无疑问，如果我们不加 --syncmode fast 参数，同步将花费很长时间并且具有很高的资源要求(它将需要更多的 RAM，如果你没有快速存储，则需要很长时间)。</span></p><p><span>有些文章会把这个参数写成 --fast，这是以前快速同步模式的参数写法，现在已经被 –syncmode fast取代。</span></p><figure><table><thead><tr><th style='text-align:center;' ><span>参数类型</span></th><th><span>意义</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>--syncmode fast</span></td><td>&nbsp;</td></tr><tr><td style='text-align:center;' ><span>--syncmode full</span></td><td><span>下载所有信息</span></td></tr><tr><td style='text-align:center;' ><span>--syncmode light</span></td><td><span>连区块都不下载</span></td></tr></tbody></table></figure><p><span>如果我们想同步</span><strong><span>测试网络</span></strong><span>的区块，可以用下面的命令:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">$ geth --testnet --datadir . --syncmode fast</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 27px;"></div><div class="CodeMirror-gutters" style="display: none; height: 27px;"></div></div></div></pre><p><span>--testnet 这个参数会告诉 geth 启动并连接到最新的测试网络，也就是 Ropsten。测试网络的区块和交易数量会明显少于主网，所以会更快一点。但即使是用快速模式同步测试网络，也会需要几个小时的时间。</span></p><p><span>【我们除了要真正运行主链或测试链，否则不用同步这些东西】</span></p><h2 id='geth搭建私链'><span>geth搭建私链</span></h2><p><span>(本节内容均为尚硅谷课程笔记摘录)</span></p><p><span>因为公共网络的区块数量太多，同步耗时太长，我们为了方便快速了解 Geth，可以试着用它来搭一个只属于自己的私链。</span></p><p><span>首先，我们需要创建网络的“创世”(genesis)状态，这写在一个小小的 JSON 文件里(例如，我们将其命名为genesis.json):</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="json"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="json"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"config"</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"chainId"</span>: <span class="cm-number">15</span> <span class="cm-comment">// 注意这个chainId最好不要和主网和测试网一样</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"difficulty"</span>: <span class="cm-string">"2000"</span>, <span class="cm-comment">// 难度</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"gasLimit"</span>: <span class="cm-string">"2100000"</span>, </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"alloc"</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// 对应的每个对象的余额</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"7df9a875a174b3bc565e6424a0050ebc1b2d1d82"</span>: { <span class="cm-string cm-property">"balance"</span>: <span class="cm-string">"300000"</span> },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"f41c74c9ae680c1aa78f42e5647a62f353b7bdde"</span>: { <span class="cm-string cm-property">"balance"</span>: <span class="cm-string">"400000"</span> } </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 324px;"></div><div class="CodeMirror-gutters" style="display: none; height: 324px;"></div></div></div></pre><p><span>【创造链】要创建一条以它作为创世块的区块链，我们可以使用下面的命令:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">geth <span class="cm-attribute">--datadir</span> path/to/custom/data/folder init genesis.json</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 27px;"></div><div class="CodeMirror-gutters" style="display: none; height: 27px;"></div></div></div></pre><p><span>【启动链】在当前目录下运行 geth，就会启动这条私链，注意要将 networked 设置为与创世块配置里的chainId 一致。</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">geth <span class="cm-attribute">--datadir</span> path/to/custom/data/folder <span class="cm-attribute">--networkid</span> <span class="cm-number">15</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 27px;"></div><div class="CodeMirror-gutters" style="display: none; height: 27px;"></div></div></div></pre><p><span>【启动+可以连接】不过经过测试，上边这个命令并不能让我本地的钱包通过local8584连接到私连上，需要这样做</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.25px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">geth <span class="cm-attribute">--datadir</span> ./mychain/ <span class="cm-attribute">--networkid</span> <span class="cm-number">15</span> console <span class="cm-attribute">--rpc</span> <span class="cm-attribute">--rpccorsdomain</span> <span class="cm-string">"*"</span> <span class="cm-attribute">--allow-insecure-unlock</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 54px;"></div><div class="CodeMirror-gutters" style="display: none; height: 54px;"></div></div></div></pre><p><span>我们可以看到节点正常启动:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.25px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">WARN [10-23|02:38:19] No etherbase set and no accounts found as default INFO [10-23|02:38:19] Starting peer-to-peer node instance=Geth/v1.8.0-unstable-e37f7be9/linux-amd64/go1.9</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">INFO [10-23|02:38:21] IPC endpoint opened: /home/ubuntu/project/go_ethereum_test/geth.ipc INFO [10-23|02:38:21] Mapped network port</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">proto=tcp</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">extport=30303 intport=30303 interface="UPNP IGDv1-IP1"</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 189px;"></div><div class="CodeMirror-gutters" style="display: none; height: 189px;"></div></div></div></pre><p><span>恭喜!我们已经成功启动了一条自己的私链。</span></p><p><strong><span>【下边是运行记录】：</span></strong><span>！！！</span></p><p><img src="resources/图片1.png" alt="图片1" style="zoom:67%;" /></p><p><img src="resources/图片2.png" alt="图片2" style="zoom:67%;" /></p><p><img src="resources/图片3.png" alt="图片3" style="zoom:67%;" /></p><p><img src="resources/图片4.png" alt="图片4" style="zoom:60%;" /></p><p><span>Configure the Ethereum client geth to set up and run own private chain</span></p><p><span>Creat</span>
<span>geth --datadir ./mychain/ init ./genesis.json</span>
<span>Start</span>
<span>geth --datadir ./mychain/ --networkid 15 console --rpc --rpccorsdomain &quot;*&quot; --allow-insecure-unlock</span></p><h2 id='geth控制台命令'><span>Geth控制台命令</span></h2><h4 id='常用资料链接'><span>常用资料链接</span></h4><p><a href='https://geth.ethereum.org/docs/'><span>Geth官方文档</span></a></p><h4 id='geth常用命令'><span>geth常用命令</span></h4><p><span>运行私链的时候同时加上</span><code>console</code><span>这个参数，就会开启Geth控制台。Geth Console 是一个交互式的 JavaScript 执行环境，里面内置了一些用来操作以太坊的 JavaScript对象，我们可以直接调用这些对象来获取区块链上的相关信息。这些对象主要包括：</span></p><p><a href='https://www.cnblogs.com/wanghui-garcia/p/10256520.html'><span>geth命令总结</span></a></p><figure><table><thead><tr><th style='text-align:center;' ><span>命令</span></th><th style='text-align:center;' ><span>含义</span></th></tr></thead><tbody><tr><td style='text-align:center;' ><span>eth</span></td><td style='text-align:center;' ><span>主要包含对区块链进行访问和交互相关的方法</span></td></tr><tr><td style='text-align:center;' ><span>net</span></td><td style='text-align:center;' ><span>主要包含查看 p2p 网络状态的方法</span></td></tr><tr><td style='text-align:center;' ><span>admin</span></td><td style='text-align:center;' ><span>主要包含与管理节点相关的方法</span></td></tr><tr><td style='text-align:center;' ><span>miner</span></td><td style='text-align:center;' ><span>主要包含挖矿相关的一些方法</span></td></tr><tr><td style='text-align:center;' ><span>personal</span></td><td style='text-align:center;' ><span>包含账户管理的方法</span></td></tr><tr><td style='text-align:center;' ><span>txpool</span></td><td style='text-align:center;' ><span>包含查看交易内存池的方法</span></td></tr><tr><td style='text-align:center;' ><span>web3</span></td><td style='text-align:center;' ><span>包含以上所有对象，还包含一些通用方法</span></td></tr><tr><td style='text-align:center;' ><span>personal.newAccount()</span></td><td style='text-align:center;' ><span>创建账户</span></td></tr><tr><td style='text-align:center;' ><span>personal.unlockAccount()</span></td><td style='text-align:center;' ><span>解锁账户</span></td></tr><tr><td style='text-align:center;' ><span>eth.accounts</span></td><td style='text-align:center;' ><span>列出系统中的账户</span></td></tr><tr><td style='text-align:center;' ><span>eth.getBalance()</span></td><td style='text-align:center;' ><span>查看账户余额，返回值的单位是 Wei</span></td></tr><tr><td style='text-align:center;' ><span>eth.blockNumber</span></td><td style='text-align:center;' ><span>列出当前区块高度</span></td></tr><tr><td style='text-align:center;' ><span>eth.getTransaction()</span></td><td style='text-align:center;' ><span>获取交易信息</span></td></tr><tr><td style='text-align:center;' ><span>eth.getBlock()</span></td><td style='text-align:center;' ><span>获取区块信息</span></td></tr><tr><td style='text-align:center;' ><span>miner.start()</span></td><td style='text-align:center;' ><span>开始挖矿</span></td></tr><tr><td style='text-align:center;' ><span>miner.stop()</span></td><td style='text-align:center;' ><span>停止挖矿</span></td></tr><tr><td style='text-align:center;' ><span>web3.fromWei()</span></td><td style='text-align:center;' ><span>Wei 换算成以太币</span></td></tr><tr><td style='text-align:center;' ><span>web3.toWei()</span></td><td style='text-align:center;' ><span>以太币换算成 Wei</span></td></tr><tr><td style='text-align:center;' ><span>txpool.status</span></td><td style='text-align:center;' ><span>交易池中的状态</span></td></tr></tbody></table></figure><h4 id='geth实验记录'><span>geth实验记录</span></h4><p><span>实验日期：2022.2.18</span></p><p><span>自己的账户是</span><code>0x6118307A4f669b43beD30Bc785b93657B4c54F9A</code><span>,创世链的时候创建了2000以太</span></p><ul><li><p><span>通过ether为单位查看余额</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="bash"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">web3.fromWei(eth.getBalance(<span class="cm-string">"0x..."</span>))</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 27px;"></div><div class="CodeMirror-gutters" style="display: none; height: 27px;"></div></div></div></pre></li><li><p><span>创建新账户,控制台输入</span><code>personal.newAccount()</code><span>, 然后会然我输入密码, 之后创建好了账户</span><code>&quot;0xfa2a67d6a6c0a0f6407b743ade22d80b5df38af8&quot;</code><span>.</span></p></li><li><p><span>查看所有账户，就可以看到刚才创建的账户了，控制台输入</span><code>eth.accounts</code><span>, 控制台返回</span><code>[&quot;0xfa2a67d6a6c0a0f6407b743ade22d80b5df38af8&quot;]</code><span>.</span></p></li><li><p><span>由于账户在js里边是一个数组，我们要查看第一个账户的余额可以直接控制台输入</span><code>eth.getBalance(eth.accounts[0])</code><span>,这个账户是新创建的, 没有以太, 控制台返回了</span><code>0</code><span>.</span></p></li><li><p><span>【错误】我们尝试用原始钱包的账户为新创建的用户转账, 控制台输入</span><code>eth.sendTransaction({from:&quot;0x6118307A4f669b43beD30Bc785b93657B4c54F9A&quot;,to:eth.accounts[0],value:100000})</code><span>,控制台会弹出错误:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Error: unknown account</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">at web3.js:6357:37(47)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">at web3.js:5091:62(37)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">at &lt;eval&gt;:1:20(13)</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 108px;"></div><div class="CodeMirror-gutters" style="display: none; height: 108px;"></div></div></div></pre><p><span>这是因为</span><code>0x6118307A4f669b43beD30Bc785b93657B4c54F9A</code><span>是创世的地址，不是geth有权限操作的，就像你不能随便拿别人的用户转钱。</span></p></li><li><p><span>我们用新创建的用户转钱前需要首先解锁账户,控制台输入</span><code>personal.unlockAccount(eth.accounts[0])</code><span>,输入密码,解锁。现在这是个可以交易的账户了。</span></p></li><li><p><span>使用刚创建的账户进行挖矿, 控制台输入</span><code>miner.start(1)</code><span>,参数1就是不要停的意思。过一会儿输入</span><code>miner.stop()</code><span>,代表停止挖矿。然后输入</span><code>eth.blockNumber</code><span>,查看区块数量, 已经不是0了。这是控制台输入</span><code>web3.fromWei(eth.getBalance(eth.accounts[0]))</code><span>，发现这个账户已经拥有很多ether了。</span></p></li><li><p><a href='https://www.cxyzjd.com/article/qq_46526828/113784232go'><span>将刚才在geth创建的账户到入MetaMesk钱包中</span></a><span>,是哟哦那个MetaMesk导入钱包功能的通过json导入方法，然后json在自己的创建的链的keystore文件夹下。</span></p></li><li><p><span>现在我们用挖矿的账号，给初始账号转一些以太试一下, 首先进行账户的解锁,</span><code>personal.unlockAccount(eth.accounts[0],&quot;密码&quot;)</code><span>,然后进行转账,</span><code>eth.sendTransaction({from:eth.accounts[0],to:&quot;0x6118307A4f669b43beD30Bc785b93657B4c54F9A&quot;,value:web3.toWei(10,&#39;ether&#39;)})</code><span>,结果还是报错 invaild sender。原来是视频中配置文件没配置全, 根据</span><a href='https://geth.ethereum.org/docs/interface/private-network'><span>官网</span></a><span>修改后的genesis.json:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="json" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="json"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11.5px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string cm-property">"config"</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string cm-property">"chainId"</span>: <span class="cm-number">15</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string cm-property">"homesteadBlock"</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string cm-property">"eip150Block"</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string cm-property">"eip155Block"</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string cm-property">"eip158Block"</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string cm-property">"byzantiumBlock"</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string cm-property">"constantinopleBlock"</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string cm-property">"petersburgBlock"</span>: <span class="cm-number">0</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string cm-property">"ethash"</span>: {}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span>},</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string cm-property">"difficulty"</span>: <span class="cm-string">"2000"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string cm-property">"gasLimit"</span>: <span class="cm-string">"8000000"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string cm-property">"alloc"</span>: {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string cm-property">"0x6118307A4f669b43beD30Bc785b93657B4c54F9A"</span>: { </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-string cm-property">"balance"</span>: <span class="cm-string">"4000000000000000000000"</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation" cm-text="	">  </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">  </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 540px;"></div><div class="CodeMirror-gutters" style="display: none; height: 540px;"></div></div></div></pre></li><li><p><span>另外挖矿指令输入后出现</span><code>WARN [02-18|16:06:09.012] Block sealing failed, err=&quot;unauthorized signer&quot;</code><span>,最后发现原来是geth新版本只有在有提交的时候才会有矿挖，如果需要不停的挖矿要这样启动</span><code>geth --nodiscover console --dev --dev.period 1</code></p></li><li><p><span>控制台输入</span><code>eth.get</code><span>，控制台会返回所有可以get的函数，比如</span><code>eth.getTransaction(&quot;某哈希值&quot;)</code></p></li><li><p><span>最后通过MetaMesk连接私链的时候，出现“Invalid Sender”可能是因为没有设置好chainID:</span><a href='https://blog.csdn.net/laixide110/article/details/83895013?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1.pc_relevant_aa&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1.pc_relevant_aa&amp;utm_relevant_index=2'><span>解决办法</span></a></p></li><li><p><strong><span>目前总结：</span></strong></p><ul><li><span>创建私链：</span><code>geth --datadir ./mychain/ init ./genesis.json</code></li><li><span>启动私链-普通模式：</span><code>geth --datadir ./mychain/ --networkid 15  --http --http.api personal,eth,net,web3 console --allow-insecure-unlock 2&gt;output.log</code></li><li><span>创建两个账户：</span><code>personal.newAccount()</code></li><li><span>创建password.txt</span></li><li><span>启动私链-测试模式：</span><code>geth --datadir ./mychain/ --networkid 15 --dev --dev.period 1 --password password.txt --http --http.api personal,eth,net,web3 console --allow-insecure-unlock 2&gt;output.log</code></li><li><span>(最新)：</span><code>geth --datadir ./mychain/ --networkid 15 --dev --dev.period 0 --password password.txt --http --http.api personal,eth,net,web3 --http.corsdomain &#39;*&#39; console --allow-insecure-unlock 2&gt;output.log</code></li><li><span>余额：</span><code>web3.fromWei(eth.getBalance(eth.accounts[0]))</code></li><li><span>区块高度：</span><code>eth.blockNumber</code></li><li><span>开始挖矿：</span><code>miner.start(1)</code></li><li><span>结束挖矿：</span><code>miner.stop()</code></li><li><span>解锁账户：</span><code>personal.unlockAccount(eth.accounts[0])</code></li><li><span>进行转账(给自己转1以太)：</span><code>eth.sendTransaction({from:eth.accounts[0],to:eth.accounts[1],value:web3.toWei(1,&#39;ether&#39;)})</code></li></ul></li></ul></div></div>
</body>
</html>